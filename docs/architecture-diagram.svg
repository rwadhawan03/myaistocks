<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="frontendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe"/>
      <stop offset="100%" style="stop-color:#00f2fe"/>
    </linearGradient>
    <linearGradient id="backendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#43e97b"/>
      <stop offset="100%" style="stop-color:#38f9d7"/>
    </linearGradient>
    <linearGradient id="externalGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a"/>
      <stop offset="100%" style="stop-color:#fee140"/>
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#a18cd1"/>
      <stop offset="100%" style="stop-color:#fbc2eb"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="900" fill="#f8fafc"/>
  
  <!-- Title -->
  <rect x="0" y="0" width="1200" height="60" fill="url(#headerGrad)"/>
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="white" text-anchor="middle">Stock AI Analyst - System Architecture</text>
  
  <!-- User/Client Section -->
  <rect x="50" y="90" width="200" height="100" rx="10" fill="#e2e8f0" filter="url(#shadow)"/>
  <text x="150" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#334155" text-anchor="middle">User</text>
  <text x="150" y="155" font-family="Arial, sans-serif" font-size="12" fill="#64748b" text-anchor="middle">Web Browser</text>
  <circle cx="150" cy="115" r="8" fill="#667eea"/>
  
  <!-- Frontend Box -->
  <rect x="50" y="220" width="350" height="320" rx="10" fill="white" stroke="#4facfe" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="220" width="350" height="40" rx="10" fill="url(#frontendGrad)"/>
  <text x="225" y="247" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Frontend (HTML/JS/CSS)</text>
  
  <!-- Frontend Components -->
  <rect x="70" y="280" width="145" height="50" rx="5" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1"/>
  <text x="142" y="310" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0369a1" text-anchor="middle">Dashboard</text>
  
  <rect x="235" y="280" width="145" height="50" rx="5" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1"/>
  <text x="307" y="310" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0369a1" text-anchor="middle">AI Analyst Chat</text>
  
  <rect x="70" y="345" width="145" height="50" rx="5" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1"/>
  <text x="142" y="375" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0369a1" text-anchor="middle">Market Explorer</text>
  
  <rect x="235" y="345" width="145" height="50" rx="5" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1"/>
  <text x="307" y="375" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0369a1" text-anchor="middle">Scheduler</text>
  
  <!-- Frontend Tech Stack -->
  <rect x="70" y="420" width="310" height="100" rx="5" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="225" y="445" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0284c7" text-anchor="middle">Tech Stack</text>
  <text x="225" y="465" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Bootstrap 5 | Chart.js | Fetch API</text>
  <text x="225" y="485" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Vanilla JavaScript (ES6+)</text>
  <text x="225" y="505" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Responsive SPA Design</text>
  
  <!-- Backend Box -->
  <rect x="450" y="220" width="350" height="450" rx="10" fill="white" stroke="#43e97b" stroke-width="2" filter="url(#shadow)"/>
  <rect x="450" y="220" width="350" height="40" rx="10" fill="url(#backendGrad)"/>
  <text x="625" y="247" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Backend (FastAPI + Python)</text>
  
  <!-- Backend Components -->
  <rect x="470" y="280" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="542" y="300" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">main.py</text>
  <text x="542" y="318" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">API Routes</text>
  
  <rect x="635" y="280" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="707" y="300" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">ai_service.py</text>
  <text x="707" y="318" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">OpenAI Integration</text>
  
  <rect x="470" y="345" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="542" y="365" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">mcp_tools.py</text>
  <text x="542" y="383" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">Financial Data Tools</text>
  
  <rect x="635" y="345" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="707" y="365" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">database.py</text>
  <text x="707" y="383" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">JSON Storage</text>
  
  <rect x="470" y="410" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="542" y="430" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">scheduler_service.py</text>
  <text x="542" y="448" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">APScheduler Jobs</text>
  
  <rect x="635" y="410" width="145" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="707" y="430" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">email_service.py</text>
  <text x="707" y="448" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">SMTP Notifications</text>
  
  <rect x="470" y="475" width="310" height="50" rx="5" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="625" y="495" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">models.py</text>
  <text x="625" y="513" font-family="Arial, sans-serif" font-size="9" fill="#166534" text-anchor="middle">Pydantic Data Models &amp; Validation</text>
  
  <!-- Backend Tech Stack -->
  <rect x="470" y="545" width="310" height="105" rx="5" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1"/>
  <text x="625" y="570" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Tech Stack</text>
  <text x="625" y="590" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">FastAPI 0.104+ | Python 3.10+</text>
  <text x="625" y="610" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Pydantic | APScheduler | aiosmtplib</text>
  <text x="625" y="630" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Deployed on Fly.io</text>
  
  <!-- External Services Box -->
  <rect x="850" y="220" width="300" height="250" rx="10" fill="white" stroke="#fa709a" stroke-width="2" filter="url(#shadow)"/>
  <rect x="850" y="220" width="300" height="40" rx="10" fill="url(#externalGrad)"/>
  <text x="1000" y="247" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">External Services</text>
  
  <!-- External Service Components -->
  <rect x="870" y="280" width="260" height="60" rx="5" fill="#fef2f2" stroke="#ef4444" stroke-width="1"/>
  <text x="1000" y="305" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#991b1b" text-anchor="middle">OpenAI API</text>
  <text x="1000" y="325" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">GPT-4o Model | Function Calling</text>
  
  <rect x="870" y="355" width="260" height="60" rx="5" fill="#fffbeb" stroke="#f59e0b" stroke-width="1"/>
  <text x="1000" y="380" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#92400e" text-anchor="middle">yfinance</text>
  <text x="1000" y="400" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Real-time Stock Data | Historical Data</text>
  
  <rect x="870" y="430" width="260" height="30" rx="5" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="1000" y="450" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">SMTP Server (Email Alerts)</text>
  
  <!-- Data Storage Box -->
  <rect x="850" y="500" width="300" height="170" rx="10" fill="white" stroke="#a18cd1" stroke-width="2" filter="url(#shadow)"/>
  <rect x="850" y="500" width="300" height="40" rx="10" fill="url(#dataGrad)"/>
  <text x="1000" y="527" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">Data Storage</text>
  
  <rect x="870" y="555" width="120" height="50" rx="5" fill="#faf5ff" stroke="#a855f7" stroke-width="1"/>
  <text x="930" y="580" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7e22ce" text-anchor="middle">users.json</text>
  <text x="930" y="595" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">User Accounts</text>
  
  <rect x="1010" y="555" width="120" height="50" rx="5" fill="#faf5ff" stroke="#a855f7" stroke-width="1"/>
  <text x="1070" y="580" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7e22ce" text-anchor="middle">schedulers.json</text>
  <text x="1070" y="595" font-family="Arial, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Alert Configs</text>
  
  <text x="1000" y="640" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">JSON File-based Storage</text>
  
  <!-- Arrows and Connections -->
  <!-- User to Frontend -->
  <line x1="150" y1="190" x2="150" y2="220" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7"/>
    </marker>
  </defs>
  
  <!-- Frontend to Backend -->
  <path d="M 400 380 L 450 380" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>
  <text x="425" y="370" font-family="Arial, sans-serif" font-size="9" fill="#22c55e" text-anchor="middle">REST API</text>
  
  <!-- Backend to External Services -->
  <path d="M 800 310 L 870 310" stroke="#ef4444" stroke-width="2" fill="none" marker-end="url(#arrowhead-red)"/>
  <path d="M 800 385 L 870 385" stroke="#f59e0b" stroke-width="2" fill="none"/>
  
  <!-- Backend to Data Storage -->
  <path d="M 800 580 L 870 580" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowhead-purple)"/>
  
  <!-- Data Flow Labels -->
  <rect x="50" y="700" width="1100" height="180" rx="10" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="600" y="730" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#334155" text-anchor="middle">Key Data Flows</text>
  
  <!-- Flow 1 -->
  <circle cx="100" cy="760" r="15" fill="#4facfe"/>
  <text x="100" y="765" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">1</text>
  <text x="130" y="765" font-family="Arial, sans-serif" font-size="11" fill="#334155" text-anchor="start">Chat Request: User -> Frontend -> Backend -> OpenAI (with MCP tool calls) -> Response</text>
  
  <!-- Flow 2 -->
  <circle cx="100" cy="800" r="15" fill="#43e97b"/>
  <text x="100" y="805" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">2</text>
  <text x="130" y="805" font-family="Arial, sans-serif" font-size="11" fill="#334155" text-anchor="start">Market Data: Frontend -> Backend -> yfinance API -> Real-time stock prices, technicals, news</text>
  
  <!-- Flow 3 -->
  <circle cx="100" cy="840" r="15" fill="#fa709a"/>
  <text x="100" y="845" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">3</text>
  <text x="130" y="845" font-family="Arial, sans-serif" font-size="11" fill="#334155" text-anchor="start">Scheduled Alerts: APScheduler (8:30 AM / 5:00 PM) -> AI Analysis -> Email Service -> User Inbox</text>
  
  <!-- Version -->
  <text x="1150" y="880" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8" text-anchor="end">v1.0.0</text>
</svg>
